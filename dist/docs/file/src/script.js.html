<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/script.js | @paypal/sdk-client</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Shared config between PayPal/Braintree."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="@paypal/sdk-client"><meta property="twitter:description" content="Shared config between PayPal/Braintree."></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-buildPayPalAPIUrl">buildPayPalAPIUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-buildPayPalUrl">buildPayPalUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getAuthAPIUrl">getAuthAPIUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getOrderAPIUrl">getOrderAPIUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPayPalDomainRegex">getPayPalDomainRegex</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPayPalLoggerDomain">getPayPalLoggerDomain</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPayPalLoggerUrl">getPayPalLoggerUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isPayPalDomain">isPayPalDomain</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-checkForCommonErrors">checkForCommonErrors</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getAPIStageHost">getAPIStageHost</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getComponents">getComponents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getCorrelationID">getCorrelationID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getDebug">getDebug</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getDefaultAPIStageHost">getDefaultAPIStageHost</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getDefaultNamespace">getDefaultNamespace</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getDefaultServiceStageHost">getDefaultServiceStageHost</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getDefaultStageHost">getDefaultStageHost</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getDisableSetCookie">getDisableSetCookie</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEnv">getEnv</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getFundingEligibility">getFundingEligibility</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getHost">getHost</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getHostName">getHostName</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPath">getPath</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPayPalAPIDomain">getPayPalAPIDomain</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPayPalDomain">getPayPalDomain</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPlatform">getPlatform</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPort">getPort</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getProtocol">getProtocol</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSDKHost">getSDKHost</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getStageHost">getStageHost</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getVersion">getVersion</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setup">setup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSDKMeta">getSDKMeta</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getAmount">getAmount</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getBuyerCountry">getBuyerCountry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getCSPNonce">getCSPNonce</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getClientAccessToken">getClientAccessToken</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getClientID">getClientID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getClientToken">getClientToken</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getCommit">getCommit</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getCountry">getCountry</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getCurrency">getCurrency</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getDisableCard">getDisableCard</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getDisableFunding">getDisableFunding</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEnableFunding">getEnableFunding</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getEnableThreeDomainSecure">getEnableThreeDomainSecure</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getIntent">getIntent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getLang">getLang</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getLocale">getLocale</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getMerchantID">getMerchantID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getMerchantRequestedPopupsDisabled">getMerchantRequestedPopupsDisabled</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getNamespace">getNamespace</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPageType">getPageType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getPartnerAttributionID">getPartnerAttributionID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSDKAttribute">getSDKAttribute</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSDKIntegrationSource">getSDKIntegrationSource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSDKQueryParam">getSDKQueryParam</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSDKQueryParamBool">getSDKQueryParamBool</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSDKQueryParams">getSDKQueryParams</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getScriptUrl">getScriptUrl</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getUserAccessToken">getUserAccessToken</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getUserAuthCode">getUserAuthCode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getUserExperienceFlow">getUserExperienceFlow</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getUserIDToken">getUserIDToken</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getVault">getVault</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isChildWindow">isChildWindow</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getClientMetadataID">getClientMetadataID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSessionID">getSessionID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSessionState">getSessionState</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getStorageID">getStorageID</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getStorageState">getStorageState</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getSDKInitTime">getSDKInitTime</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-setupLogger">setupLogger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getComputedLocales">getComputedLocales</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CLIENT_ID_ALIAS">CLIENT_ID_ALIAS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SUPPORTED_BROWSERS">SUPPORTED_BROWSERS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-URI">URI</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FPTI_CONTEXT_TYPE">FPTI_CONTEXT_TYPE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FPTI_STATE">FPTI_STATE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FPTI_TRANSITION">FPTI_TRANSITION</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getEventEmitter">getEventEmitter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getLogger">getLogger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getSDKAttributes">getSDKAttributes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getSDKScript">getSDKScript</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-_TYPES">_TYPES</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/script.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/* @flow */

import {
  getCurrentScriptUID,
  ATTRIBUTES,
  parseQuery,
  getBrowserLocales,
  base64decode,
  values,
  getCurrentScript,
  memoize,
  stringifyError,
  getScript,
} from &quot;@krakenjs/belter/src&quot;;
import {
  COUNTRY,
  SDK_SETTINGS,
  SDK_QUERY_KEYS,
  INTENT,
  COMMIT,
  VAULT,
  CURRENCY,
  FUNDING,
  CARD,
  COUNTRY_LANGS,
  DEFAULT_INTENT,
  DEFAULT_CURRENCY,
  DEFAULT_VAULT,
  QUERY_BOOL,
  LANG,
  type LocaleType,
  DEFAULT_SALE_COMMIT,
  DEFAULT_NONSALE_COMMIT,
  PAGE_TYPES,
} from &quot;@paypal/sdk-constants/src&quot;;

import { getPath, getDefaultNamespace, getSDKHost } from &quot;./global&quot;;
import { CLIENT_ID_ALIAS } from &quot;./config&quot;;
import { getComputedLocales } from &quot;./utils&quot;;

type GetSDKScript = () =&gt; HTMLScriptElement;

const buildScriptNotFoundError = (host, path, error) =&gt; {
  const errorString = error ? stringifyError(error) : &quot;&quot;;

  return new Error(
    `PayPal Payments SDK script not found on page! Expected to find &lt;script src=&quot;https://${host}${path}&quot;&gt;\n\n${errorString}`
  );
};

export const getSDKScript: GetSDKScript = memoize(() =&gt; {
  if (__TEST__) {
    const script = getScript({
      host: getSDKHost(),
      path: getPath(),
      reverse: true,
    });
    if (!script) {
      throw buildScriptNotFoundError(getSDKHost(), getPath());
    }
    return script;
  }

  try {
    return getCurrentScript();
  } catch (error) {
    throw buildScriptNotFoundError(getSDKHost(), getPath(), error);
  }
});

type GetSDKAttributes = () =&gt; { [string]: string };

export const getSDKAttributes: GetSDKAttributes = memoize(() =&gt; {
  const sdkScript = getSDKScript();
  const result = {};
  for (const attr of sdkScript.attributes) {
    if (attr.name.indexOf(&quot;data-&quot;) === 0) {
      result[attr.name] = attr.value;
    }
  }
  result[ATTRIBUTES.UID] = getCurrentScriptUID();
  return result;
});

export function getSDKAttribute&lt;T: string | void&gt;(
  name: $Values&lt;typeof SDK_SETTINGS&gt;,
  def: T
): T {
  // $FlowFixMe
  return getSDKAttributes()[name] || def;
}

export function getSDKQueryParams(): { [string]: string } {
  const script = getSDKScript();
  return parseQuery(script.src.split(&quot;?&quot;)[1] || &quot;&quot;);
}

type GetSDKQueryParam =
  // eslint-disable-next-line no-undef
  (&lt;T: string&gt;($Values&lt;typeof SDK_QUERY_KEYS&gt;) =&gt; T | void) &amp;
    // eslint-disable-next-line no-undef
    (&lt;T: string&gt;($Values&lt;typeof SDK_QUERY_KEYS&gt;, T) =&gt; T);

export const getSDKQueryParam: GetSDKQueryParam = &lt;T&gt;(name: string, def: T) =&gt; {
  // $FlowFixMe
  return getSDKQueryParams()[name] || def;
};

export function getScriptUrl(): string {
  const src = getSDKScript().getAttribute(&quot;src&quot;);
  if (!src) {
    throw new Error(`Can not find src for sdk script`);
  }
  return src;
}

export function getSDKQueryParamBool&lt;T: boolean&gt;(
  name: $Values&lt;typeof SDK_QUERY_KEYS&gt;,
  def?: T
): T {
  return (
    // $FlowFixMe
    getSDKQueryParam(name, def ? def.toString() : QUERY_BOOL.FALSE) ===
    QUERY_BOOL.TRUE
  );
}

export function getClientID(): string {
  const clientID = getSDKQueryParam(SDK_QUERY_KEYS.CLIENT_ID);

  if (!clientID) {
    throw new Error(
      `Expected ${SDK_QUERY_KEYS.CLIENT_ID} parameter in sdk url`
    );
  }

  if (CLIENT_ID_ALIAS[clientID]) {
    return CLIENT_ID_ALIAS[clientID];
  }

  return clientID;
}

export function getMerchantID(): $ReadOnlyArray&lt;string&gt; {
  const merchantIDString = getSDKQueryParam(SDK_QUERY_KEYS.MERCHANT_ID);

  if (merchantIDString === &quot;*&quot;) {
    // get multiple merchant ids or emails from data-merchant-id
    const merchantIDAttribute = getSDKAttribute(SDK_SETTINGS.MERCHANT_ID);

    if (!merchantIDAttribute) {
      throw new Error(
        `Must pass ${SDK_SETTINGS.MERCHANT_ID} when ${SDK_QUERY_KEYS.MERCHANT_ID}=* passed in url`
      );
    }

    const merchantID = merchantIDAttribute.split(&quot;,&quot;);

    if (merchantID.length &lt;= 1) {
      throw new Error(
        `Must pass multiple merchant ids to ${SDK_SETTINGS.MERCHANT_ID}. If passing a single id, pass ${SDK_QUERY_KEYS.MERCHANT_ID}=XYZ in url`
      );
    }

    // check duplicates
    const hasDuplicate = merchantID.some(
      (val, i) =&gt; merchantID &amp;&amp; merchantID.indexOf(val) !== i
    );

    if (hasDuplicate) {
      throw new Error(
        `Duplicates ${SDK_SETTINGS.MERCHANT_ID}. Must pass unique merchant ids to ${SDK_SETTINGS.MERCHANT_ID}.`
      );
    }
    return merchantID;
  }

  if (merchantIDString) {
    return merchantIDString.split(&quot;,&quot;);
  }

  return [];
}

export function getIntent(): $Values&lt;typeof INTENT&gt; {
  return getSDKQueryParam(SDK_QUERY_KEYS.INTENT, DEFAULT_INTENT);
}

export function getCommit(): $Values&lt;typeof COMMIT&gt; {
  return getSDKQueryParamBool(
    SDK_QUERY_KEYS.COMMIT,
    getIntent() === INTENT.CAPTURE
      ? DEFAULT_SALE_COMMIT
      : DEFAULT_NONSALE_COMMIT
  );
}

export function getVault(): $Values&lt;typeof VAULT&gt; {
  return getSDKQueryParamBool(SDK_QUERY_KEYS.VAULT, DEFAULT_VAULT);
}

export function getCurrency(): $Values&lt;typeof CURRENCY&gt; {
  return getSDKQueryParam(SDK_QUERY_KEYS.CURRENCY, DEFAULT_CURRENCY);
}

export function getEnableFunding(): $ReadOnlyArray&lt;?$Values&lt;typeof FUNDING&gt;&gt; {
  const funding = getSDKQueryParam(SDK_QUERY_KEYS.ENABLE_FUNDING);
  if (funding) {
    return funding.split(&quot;,&quot;);
  }
  return [];
}

export function getDisableFunding(): $ReadOnlyArray&lt;?$Values&lt;typeof FUNDING&gt;&gt; {
  const funding = getSDKQueryParam(SDK_QUERY_KEYS.DISABLE_FUNDING);
  if (funding) {
    return funding.split(&quot;,&quot;);
  }
  return [];
}

export function getDisableCard(): $ReadOnlyArray&lt;?$Values&lt;typeof CARD&gt;&gt; {
  const funding = getSDKQueryParam(SDK_QUERY_KEYS.DISABLE_CARD);
  if (funding) {
    return funding.split(&quot;,&quot;);
  }
  return [];
}

export function getBuyerCountry(): ?$Values&lt;typeof COUNTRY&gt; {
  return getSDKQueryParam(SDK_QUERY_KEYS.BUYER_COUNTRY);
}

export function getNamespace(): string {
  return getSDKAttribute(SDK_SETTINGS.NAMESPACE) || getDefaultNamespace();
}

export function getClientToken(): ?string {
  return getSDKAttribute(SDK_SETTINGS.CLIENT_TOKEN);
}

export function getAmount(): ?string {
  const amount = getSDKAttribute(SDK_SETTINGS.AMOUNT);
  if (amount &amp;&amp; !amount.match(/^\d+\.\d\d$/)) {
    throw new Error(`Invalid amount: ${amount}`);
  }
  return amount;
}

export function getUserIDToken(): ?string {
  return getSDKAttribute(SDK_SETTINGS.USER_ID_TOKEN);
}

export function getClientAccessToken(): ?string {
  const clientToken = getClientToken();

  if (clientToken) {
    return JSON.parse(base64decode(clientToken)).paypal.accessToken;
  }
}

export function getPartnerAttributionID(): ?string {
  return getSDKAttribute(SDK_SETTINGS.PARTNER_ATTRIBUTION_ID);
}

export function getMerchantRequestedPopupsDisabled(): boolean {
  return getSDKAttribute(SDK_SETTINGS.POPUPS_DISABLED) === &quot;true&quot;;
}

export function getPageType(): ?string {
  const pageType = getSDKAttribute(SDK_SETTINGS.PAGE_TYPE, &quot;&quot;);
  const validPageType =
    values(PAGE_TYPES).indexOf(pageType.toLowerCase()) !== -1;

  if (!validPageType &amp;&amp; pageType.length) {
    throw new Error(`Invalid page type, &apos;${pageType}&apos;`);
  }
  return pageType.toLowerCase();
}

export function getLocale(): LocaleType {
  const locale = getSDKQueryParam(SDK_QUERY_KEYS.LOCALE);

  if (locale) {
    return getComputedLocales(locale);
  }

  for (let { country, lang } of getBrowserLocales()) {
    country = country &amp;&amp; COUNTRY[country];
    lang = lang &amp;&amp; LANG[lang.toUpperCase()];

    if (
      country &amp;&amp;
      lang &amp;&amp;
      COUNTRY_LANGS[country] &amp;&amp;
      COUNTRY_LANGS[country].indexOf(lang) !== -1
    ) {
      return { country, lang };
    } else if (lang) {
      // We infer country from language if there is only one possible country match
      const possibleCountries = Object.keys(COUNTRY_LANGS).filter((c) =&gt;
        COUNTRY_LANGS[c].some((l) =&gt; l === lang)
      );

      if (possibleCountries.length === 1) {
        const possibleCountry = possibleCountries[0];
        return { country: possibleCountry, lang };
      }
    }
  }

  for (const { country } of getBrowserLocales()) {
    if (COUNTRY_LANGS.hasOwnProperty(country)) {
      // $FlowFixMe
      return { country, lang: COUNTRY_LANGS[country][0] };
    }
  }

  return {
    lang: LANG.EN,
    country: COUNTRY.US,
  };
}

export function getCSPNonce(): string {
  return getSDKAttribute(SDK_SETTINGS.CSP_NONCE) || &quot;&quot;;
}

export function getEnableThreeDomainSecure(): boolean {
  return getSDKAttributes().hasOwnProperty(SDK_SETTINGS.ENABLE_3DS);
}

export function getSDKIntegrationSource(): ?string {
  return getSDKAttribute(SDK_SETTINGS.SDK_INTEGRATION_SOURCE);
}

export function getUserExperienceFlow(): ?string {
  return getSDKAttribute(SDK_SETTINGS.USER_EXPERIENCE_FLOW);
}

// whether in zoid window
export function isChildWindow(): boolean {
  return Boolean(window.xprops);
}

// istanbul ignore next
export function getUserAccessToken(): ?string {
  // pass
}

// istanbul ignore next
export function getUserAuthCode(): ?string {
  // pass
}

// Remove
// istanbul ignore next
export function getCountry(): $Values&lt;typeof COUNTRY&gt; {
  return getLocale().country;
}

// Remove
// istanbul ignore next
export function getLang(): $Values&lt;typeof LANG&gt; {
  return getLocale().lang;
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
